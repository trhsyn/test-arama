<!DOCTYPE html>
<html lang="tr">
<head>
<meta charset="UTF-8">
<title>ArapÃ§a-TÃ¼rkÃ§e SÃ¶zlÃ¼k (Firestore)</title>
<style>
body { font-family: system-ui; padding:20px; background:#f5f5f5; margin:0; }
h2 { margin-top:20px; }
input, textarea, select, button { width:100%; padding:8px; margin:5px 0 15px 0; font-size:16px; box-sizing:border-box; border-radius:5px; border:1px solid #ccc; }
button { cursor:pointer; background:#2563eb; color:white; border:none; border-radius:5px; font-size:16px; padding:8px; }
button:hover { background:#1d4ed8; }
.nav-btns { margin-bottom:20px; display:flex; flex-wrap:wrap; gap:10px; }
.nav-btns button { width:auto; }
#list { display:grid; grid-template-columns:1fr; gap:15px; }
@media(min-width:600px){ #list { grid-template-columns:1fr 1fr; } }
@media(min-width:900px){ #list { grid-template-columns:1fr 1fr 1fr; } }
.card { padding:15px; border-radius:8px; color:white; box-shadow:0 2px 6px rgba(0,0,0,0.1); display:flex; flex-direction:column; }
.ar { font-size:22px; direction:rtl; font-family:"Scheherazade","Amiri",serif; margin-top:5px; }
.ex strong.hl { background:#ffeb3b; color:#000; padding:0 2px; border-radius:2px; }
.card.isim { background:#16a34a; }
.card.fiil { background:#2563eb; }
.card.mastar { background:#f97316; }
.card.deyim { background:#7c3aed; }
.card-title-container { display:flex; justify-content:space-between; align-items:center; flex-wrap:wrap; }
.card-title-container .left { display:flex; align-items:center; flex-wrap:wrap; }
.card-title-container .left .card-title { font-weight:bold; font-size:18px; margin-right:8px; }
.card-title-container .left .tag { background:rgba(255,255,255,0.3); color:white; padding:2px 6px; border-radius:4px; font-size:12px; }
.card-title-container .right button { margin-left:5px; padding:4px 8px; font-size:12px; border-radius:4px; border:none; cursor:pointer; color:white; margin-top:5px; }
.card-title-container .right button.edit { background:#fbbf24; }
.card-title-container .right button.delete { background:#ef4444; }
.card-title-container .right button.edit:hover { background:#f59e0b; }
.card-title-container .right button.delete:hover { background:#dc2626; }
</style>
</head>
<body>

<div class="nav-btns">
  <button onclick="showSection('add')">Kelime Ekle</button>
  <button onclick="showSection('search')">Kelime Ara</button>
</div>

<div id="add-section">
<h2>Kelime Ekle / DÃ¼zenle</h2>
<form id="entryForm">
  <input type="hidden" id="editId">
  <label>Kelime TÃ¼rÃ¼</label>
  <select id="type">
    <option value="isim">Ä°sim</option>
    <option value="fiil">Fiil</option>
    <option value="mastar">Mastar</option>
    <option value="deyim">Deyim</option>
  </select>

  <label>ArapÃ§a Kelime</label>
  <input id="word" required>

  <label>TÃ¼rkÃ§e KarÅŸÄ±lÄ±k</label>
  <input id="tr" required>

  <label>ArapÃ§a Ã–rnek CÃ¼mle</label>
  <textarea id="exAr"></textarea>

  <label>TÃ¼rkÃ§e Ã‡eviri</label>
  <textarea id="exTr"></textarea>

  <label>Not</label>
  <textarea id="note"></textarea>

  <button type="submit">âž• Kaydet</button>
</form>
</div>

<div id="search-section" style="display:none;">
<h2>Kelime Arama</h2>
<input id="search" placeholder="ArapÃ§a veya TÃ¼rkÃ§e arayÄ±n">
<div id="list"></div>
</div>

<!-- Firebase SDK -->
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-firestore-compat.js"></script>

<script>
// ðŸ”¹ FIREBASE CONFIG
const firebaseConfig = {
  apiKey: "AIzaSyA1Fmoo3_bJTT2R2hCjBoQTBhiohwfdnk0",
  authDomain: "sozluk-e49c1.firebaseapp.com",
  projectId: "sozluk-e49c1",
  storageBucket: "sozluk-e49c1.firebasestorage.app",
  messagingSenderId: "996478619056",
  appId: "1:996478619056:web:11840e7fbda02b84ad9a75",
  measurementId: "G-6075H1T8JV"
};const firebaseConfig = {
  apiKey: "YOUR_API_KEY",
  authDomain: "YOUR_PROJECT.firebaseapp.com",
  projectId: "YOUR_PROJECT_ID",
  storageBucket: "YOUR_PROJECT.appspot.com",
  messagingSenderId: "YOUR_SENDER_ID",
  appId: "YOUR_APP_ID"
};

// Firebase baÅŸlat
firebase.initializeApp(firebaseConfig);
const db = firebase.firestore();
const wordsCol = db.collection("words");

// BÃ¶lÃ¼m gÃ¶ster/gizle
function showSection(sec){
  document.getElementById('add-section').style.display = sec==='add'?'block':'none';
  document.getElementById('search-section').style.display = sec==='search'?'block':'none';
}

// ArapÃ§a normalize
function normalizeArabic(text){
  if(!text) return "";
  return text.replace(/[\u064B-\u065F\u0670]/g,"")
             .replace(/\u0640/g,"")
             .replace(/[Ø¢Ø£Ø¥Ù±]/g,"Ø§")
             .replace(/[ÙŠÙ‰]/g,"ÙŠ")
             .replace(/Ø©/g,"Ù‡")
             .replace(/Ø¤/g,"Ùˆ")
             .replace(/Ø¦/g,"ÙŠ").trim();
}

// Render
function render(){
  const query = document.getElementById("search").value.trim();
  const list = document.getElementById("list");
  list.innerHTML = "";
  wordsCol.get().then(snapshot=>{
    snapshot.forEach(doc=>{
      const e = doc.data();
      let ex = e.exAr || "";
      if(query){
        const qReg = new RegExp(query,"gi");
        ex = ex.replace(qReg, match => `<strong class="hl">${match}</strong>`);
      }
      const trLower = (e.tr || "").toLowerCase();
      const arNorm = normalizeArabic(e.word + " " + (e.exAr || ""));
      if(!query || arNorm.includes(normalizeArabic(query)) || trLower.includes(query.toLowerCase())){
        list.innerHTML += `
        <div class="card ${e.type}">
          <div class="card-title-container">
            <div class="left">
              <div class="card-title">${e.word}</div>
              <span class="tag">${e.type}</span>
            </div>
            <div class="right">
              <button class="edit" onclick="editEntry('${doc.id}')">DÃ¼zenle</button>
              <button class="delete" onclick="deleteEntry('${doc.id}')">Sil</button>
            </div>
          </div>
          <div><b>TÃ¼rkÃ§e:</b> ${e.tr}</div>
          ${ex ? `<div class="ar ex">${ex}</div>` : ""}
          ${e.exTr ? `<div>${e.exTr}</div>` : ""}
          ${e.note ? `<div><i>Not:</i> ${e.note}</div>` : ""}
        </div>`;
      }
    });
  });
}

// Arama input
document.getElementById("search").addEventListener("input", render);

// Ekle/DÃ¼zenle
document.getElementById("entryForm").addEventListener("submit", function(e){
  e.preventDefault();
  let id = document.getElementById("editId").value;
  const entry = {
    type: document.getElementById("type").value,
    word: document.getElementById("word").value.trim(),
    tr: document.getElementById("tr").value.trim(),
    exAr: document.getElementById("exAr").value.trim(),
    exTr: document.getElementById("exTr").value.trim(),
    note: document.getElementById("note").value.trim()
  };
  if(id){
    wordsCol.doc(id).set(entry).then(()=>{
      alert("Kelime gÃ¼ncellendi!");
      document.getElementById("entryForm").reset();
      document.getElementById("editId").value = "";
      showSection('search');
      render();
    });
  } else {
    wordsCol.add(entry).then(()=>{
      alert("Kelime eklendi!");
      document.getElementById("entryForm").reset();
      showSection('search');
      render();
    });
  }
});

// DÃ¼zenle
function editEntry(id){
  wordsCol.doc(id).get().then(doc=>{
    const e = doc.data();
    showSection('add');
    document.getElementById("editId").value = doc.id;
    document.getElementById("type").value = e.type;
    document.getElementById("word").value = e.word;
    document.getElementById("tr").value = e.tr;
    document.getElementById("exAr").value = e.exAr;
    document.getElementById("exTr").value = e.exTr;
    document.getElementById("note").value = e.note;
  });
}

// Sil
function deleteEntry(id){
  if(!confirm("Bu kelimeyi silmek istediÄŸinize emin misiniz?")) return;
  wordsCol.doc(id).delete().then(()=>render());
}

// Sayfa aÃ§Ä±ldÄ±ÄŸÄ±nda render
render();
</script>

</body>
</html>
